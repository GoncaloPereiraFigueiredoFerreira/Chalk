extends base
 
block channel_cont
    .block.w-full.border-gray-200.rounded-lg.shadow.bg-white(class="dark:bg-gray-800")
      h1.p-4.text-xl(class="dark:text-white") Upload file:
      form(method='POST' enctype="multipart/form-data" id='form').p-8
        
        .mb-6
          label.block.mb-2.text-sm.font-medium.text-gray-900(for='name' class='dark:text-white') File name:
          input.bg-gray-50.border.border-gray-300.text-gray-900.text-sm.rounded-lg.block.w-full(id="filename" name="filename" type='text' class='focus:ring-blue-500 focus:border-blue-500 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500' placeholder='' required=true)

        .mb-6
          label.block.mb-2.text-sm.font-medium.text-gray-900(for='name' class='dark:text-white') Tags: 
          .flex.flex-col
            .relative
              input(type="search" id="tag" class="block w-full p-4 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder='')
              button(type="button" onClick='addTag()' class="text-white absolute right-2.5 bottom-2.5 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800") Add Tag
              script(src="/javascripts/uploadFileForm.js")
          .my-3.flex.flex-wrap.-m-1(id='tags')
            .relative(id='tags_div')
        
        .flex.items-center.mb-4
          input(id="checkbox" type="checkbox" name='automatic' value="1" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600")
          label(for="checkbox" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300") Make automatic announcement
    
        #ann_title.mb-6.hidden
          .flex.flex-col
            label.block.mb-2.text-sm.font-medium.text-gray-900(for='title' class='dark:text-white') Automatic Announcement:
            input.bg-gray-50.border.border-gray-300.text-gray-900.text-sm.rounded-lg.block.w-full(name="title" value='['+channel.name+'] New file!' type='text' class='focus:ring-blue-500 focus:border-blue-500 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500')
          .flex.flex-col

        #ann_content.mb-6.hidden
          label.block.mb-2.text-sm.font-medium.text-gray-900(for='editor' class='dark:text-white') Post:
          .w-full.border.border-gray-200.rounded-lg.bg-gray-50(class='dark:bg-gray-700 dark:border-gray-600')
            .flex.items-center.justify-between.px-3.py-2.border-b(class='dark:border-gray-600') 
                textarea.block.w-full.text-sm.text-gray-800.border-0(name="content" value='' rows='8' class='dark:bg-gray-800 focus:ring-0 dark:text-white dark:placeholder-gray-400') A new file has been added to the channel #{channel_name}.
          
      
        .mb-6
          label.block.mb-2.text-sm.font-medium.text-gray-900(for='dropzone-file' class='dark:text-white') Choose file:
          .flex.items-center.justify-center.w-full
            label.flex.flex-col.items-center.justify-center.w-full.h-64.border-2.border-gray-300.border-dashed.rounded-lg.cursor-pointer.bg-gray-50(for='dropzone-file' class='dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600')
              .flex.flex-col.items-center.justify-center.pt-5.pb-6
                svg.w-10.h-10.mb-3.text-gray-400(aria-hidden='true' fill='none' stroke='currentColor' viewbox='0 0 24 24' xmlns='http://www.w3.org/2000/svg')
                  path(stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12')
                p.mb-2.text-sm.text-gray-500(class='dark:text-gray-400')
                  span.font-semibold Click to upload
                  |  or drag and drop
              input#dropzone-file.hidden(type='file' name="myFile" required)
  
       

        .flex.items-start.mb-6
          button.text-white.bg-blue-700.font-medium.rounded-lg.text-sm.w-full.px-5.text-center(type='submit' class='hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 sm:w-auto py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800') Submit


    script. 

        // Get file input element
        let checkbox =  $('#checkbox')
        let fileInput = document.getElementById('dropzone-file');
        let input = document.getElementById('filename');
        // Fires on file upload
        fileInput.addEventListener('change', function(event){
            
            // Get file name
            let fileName = fileInput.files[0].name;
            
            // Update file name in span
            input.value = fileName;
        });
        checkbox.on('change', function(event){
            if (checkbox.is(":checked")){
              $("#ann_content").show()
              $("#ann_title").show()
            }
            else{
              $("#ann_content").hide()
              $("#ann_title").hide()
            }
        });